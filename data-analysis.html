<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Data Analysis</title>
  <link rel="stylesheet" href="styles.css"> <!-- optional: link your existing CSS -->
  <!-- Include Chart.js library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Include TensorFlow.js for machine learning demos (if needed) -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
</head>
<body>
  <header>
    <h1>Data Analysis</h1>
    <p>This page goes into detail about your data analysis work, tools, and projects.</p>
  </header>

  <main>
    <section>
      <h2>Overview</h2>
      <p>Write about your experience, tools (e.g., Excel, Python, SQL), case studies, etc.</p>
    </section>

    <!-- Data analysis section -->
    <section id="data-analysis">
      <h2>Data Analysis Results</h2>

      <!-- Placeholder for displaying results -->
      <div id="analysis-output">
        <h3>Agent Data Summary</h3>
        <p>Total Time Spent by Agents (from sample data):</p>
        <pre id="total-time-output"></pre>
      </div>

      <!-- Chart visualization of agent activity time -->
      <canvas id="activityChart" width="400" height="200"></canvas>
    </section>
    
    <!-- API data fetching & analysis (optional) -->
    <section id="api-fetch">
      <h2>API Data Fetching and Analysis</h2>
      <button onclick="fetchDataAndAnalyze()">Fetch Data and Analyze</button>
      <pre id="api-analysis-output"></pre>
    </section>

  </main>

  <footer>
    <p>&copy; 2025 Ricardo Garcia</p>
  </footer>

  <script>
    // Sample agent data for analysis
    const data = [
      { id: 1, name: 'Agent X', activity: 'Patrol', time: 120 },
      { id: 2, name: 'Agent Y', activity: 'Surveillance', time: 200 },
      { id: 3, name: 'Agent Z', activity: 'Recon', time: 50 },
      { id: 4, name: 'Agent X', activity: 'Surveillance', time: 180 },
      { id: 5, name: 'Agent Y', activity: 'Recon', time: 70 },
    ];

    // Basic filtering and analysis (Total time spent per agent)
    const totalTimePerAgent = data.reduce((acc, agent) => {
      acc[agent.name] = (acc[agent.name] || 0) + agent.time;
      return acc;
    }, {});

    // Displaying the total time spent per agent
    document.getElementById('total-time-output').textContent = JSON.stringify(totalTimePerAgent, null, 2);

    // Chart.js Visualization of Agent Activity Time
    const ctx = document.getElementById('activityChart').getContext('2d');
    const agentNames = ['Agent X', 'Agent Y', 'Agent Z'];
    const totalTimes = [
      totalTimePerAgent['Agent X'] || 0,
      totalTimePerAgent['Agent Y'] || 0,
      totalTimePerAgent['Agent Z'] || 0
    ];

    const activityChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: agentNames,
        datasets: [{
          label: 'Total Activity Time (minutes)',
          data: totalTimes,
          backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 159, 64, 0.2)'],
          borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 159, 64, 1)'],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    // Function for API data fetching & analysis (for demo purposes)
    async function fetchDataAndAnalyze() {
      try {
        // Simulating an API call (replace with real API URL)
        const response = await fetch('https://jsonplaceholder.typicode.com/users'); // Example API
        const apiData = await response.json();

        // Analyzing fetched data (simulating simple analysis)
        const analyzedData = apiData.map(user => ({
          name: user.name,
          company: user.company.name,
        }));

        // Display the result
        document.getElementById('api-analysis-output').textContent = JSON.stringify(analyzedData, null, 2);
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }
  </script>
</body>
</html>